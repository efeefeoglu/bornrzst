<section class="product">
  <div class="container product__inner">
    <div class="product__media">
      {% if product.media.size > 0 %}
        <div class="product__gallery">
          {% for media in product.media %}
            <div class="product__media-item" role="presentation">
              {{ media | image_url: width: 900 | image_tag: loading: 'lazy', sizes: '(min-width: 900px) 50vw, 100vw', class: 'product__image' }}
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="product__placeholder">{{ 'product.media.empty' | t }}</div>
      {% endif %}
    </div>
    <div class="product__details">
      <h1 class="product__title">{{ product.title | escape }}</h1>
      <div class="product__prices">
        <span class="product__price">{{ product.price | money_with_currency }}</span>
        {% if product.compare_at_price_max > product.price %}
          <span class="product__price product__price--compare">{{ product.compare_at_price_max | money_with_currency }}</span>
        {% endif %}
      </div>
      {% if product.description != blank %}
        <div class="product__description rte">
          {{ product.description }}
        </div>
      {% endif %}
      {% assign product_share_url = product.url | absolute_url %}
      {% form 'product', product, class: 'product__form' %}
        {% assign current_variant = product.selected_or_first_available_variant %}
        {% unless product.has_only_default_variant %}
          <label class="product__option-label" for="Variant-{{ section.id }}">{{ 'product.form.variant' | t }}</label>
          <select id="Variant-{{ section.id }}" class="product__select" name="id">
            {% for variant in product.variants %}
              <option value="{{ variant.id }}"{% if variant.id == current_variant.id %} selected{% endif %}{% unless variant.available %} disabled{% endunless %}>
                {{ variant.title }}{% unless variant.available %} â€“ {{ 'product.form.sold_out' | t }}{% endunless %}
              </option>
            {% endfor %}
          </select>
        {% else %}
          <input type="hidden" name="id" value="{{ current_variant.id }}">
        {% endunless %}
        <div class="product__purchase">
          <label class="product__option-label" for="Quantity-{{ section.id }}">{{ 'product.form.quantity' | t }}</label>
          <input
            id="Quantity-{{ section.id }}"
            class="product__quantity"
            type="number"
            name="quantity"
            min="1"
            value="1"
          >
          <button type="submit" class="btn btn--light product__submit"{% unless current_variant.available %} disabled{% endunless %}>
            {% if current_variant.available %}
              {{ 'product.form.add_to_cart' | t }}
            {% else %}
              {{ 'product.form.sold_out' | t }}
            {% endif %}
          </button>
        </div>
      {% endform %}
      {% if section.settings.show_share %}
        <div class="product__share">
          <p class="product__share-title">{{ 'product.share.heading' | t }}</p>
          <ul class="product__share-list" role="list">
            <li><a href="https://www.facebook.com/sharer.php?u={{ product_share_url | url_escape }}" target="_blank" rel="noopener">Facebook</a></li>
            <li><a href="https://twitter.com/share?url={{ product_share_url | url_escape }}&text={{ product.title | escape }}" target="_blank" rel="noopener">Twitter</a></li>
            <li><a href="mailto:?subject={{ product.title | escape }}&body={{ product_share_url }}">Email</a></li>
          </ul>
        </div>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Product",
  "tag": "section",
  "class": "section-product",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_share",
      "label": "Show sharing links",
      "default": true
    }
  ]
}
{% endschema %}
