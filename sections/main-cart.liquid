<section class="cart">
  <div class="container cart__inner">
    <h1 class="cart__title">{{ 'cart.general.title' | t }}</h1>
    {% if cart.item_count > 0 %}
      <form action="{{ routes.cart_url }}" method="post" novalidate class="cart__form">
        <table class="cart__table">
          <thead>
            <tr>
              <th scope="col">{{ 'cart.general.product' | t }}</th>
              <th scope="col">{{ 'cart.general.price' | t }}</th>
              <th scope="col">{{ 'cart.general.quantity' | t }}</th>
              <th scope="col">{{ 'cart.general.total' | t }}</th>
            </tr>
          </thead>
          <tbody>
            {% for item in cart.items %}
              <tr class="cart__row">
                <td data-label="{{ 'cart.general.product' | t }}">
                  <div class="cart__product">
                    {% if item.image %}
                      <a class="cart__image" href="{{ item.url }}">
                        {{ item.image | image_url: width: 200 | image_tag: loading: 'lazy', alt: item.product.title }}
                      </a>
                    {% endif %}
                    <div class="cart__product-info">
                      <a class="cart__product-title" href="{{ item.url }}">{{ item.product.title | escape }}</a>
                      {% if item.variant.title != 'Default Title' %}
                        <span class="cart__variant">{{ item.variant.title | escape }}</span>
                      {% endif %}
                      <a class="cart__remove" href="{{ routes.cart_change_url }}?line={{ forloop.index }}&quantity=0">{{ 'cart.general.remove' | t }}</a>
                    </div>
                  </div>
                </td>
                <td data-label="{{ 'cart.general.price' | t }}">{{ item.final_price | money }}</td>
                <td data-label="{{ 'cart.general.quantity' | t }}">
                  <input
                    class="cart__quantity"
                    type="number"
                    name="updates[{{ item.key }}]"
                    id="CartItem-{{ item.key }}"
                    value="{{ item.quantity }}"
                    min="0"
                  >
                </td>
                <td data-label="{{ 'cart.general.total' | t }}">{{ item.final_line_price | money }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
        <div class="cart__footer">
          <div class="cart__subtotal">
            <span>{{ 'cart.general.subtotal' | t }}</span>
            <span>{{ cart.total_price | money_with_currency }}</span>
          </div>
          {% if cart.note != blank or section.settings.show_note %}
            <label class="cart__note-label" for="CartNote">{{ 'cart.general.note' | t }}</label>
            <textarea id="CartNote" name="note" class="cart__note" rows="3">{{ cart.note }}</textarea>
          {% endif %}
          <div class="cart__actions">
            <button type="submit" name="update" class="btn btn--light cart__update">{{ 'cart.general.update' | t }}</button>
            <button type="submit" name="checkout" class="btn btn--dark cart__checkout">{{ 'cart.general.checkout' | t }}</button>
          </div>
        </div>
      </form>
    {% else %}
      <p class="cart__empty">{{ 'cart.general.empty' | t }}</p>
      <a class="btn btn--light cart__continue" href="{{ routes.all_products_collection_url }}">{{ 'cart.general.continue' | t }}</a>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Cart",
  "tag": "section",
  "class": "section-cart",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_note",
      "label": "Enable order notes",
      "default": true
    }
  ]
}
{% endschema %}
